{"version":3,"sources":["cart.js"],"names":["cart","document","querySelector","cartModal","cartClose","cartTotal","cartSendBtn","goodsWrapper","cartWrapper","counter","openCart","localStorage","getItem","JSON","parse","style","display","textContent","reduce","sum","goodItem","price","closeCart","cartCount","length","setItem","addEventListener","event","target","classList","contains","card","closest","key","dataset","goods","find","item","id","push","stringify","btn","index","findIndex","splice","then","removeItem"],"mappings":"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","sourcesContent":["import renderCart from \"./renderCart\";\nimport postData from \"./postData\";\n\nconst cart = () =>{\n    const cart = document.querySelector('#cart');\n    const cartModal = document.querySelector('.cart');\n    const cartClose = cartModal.querySelector('.cart-close');\n    const cartTotal = cartModal.querySelector('.cart-total > span');\n    const cartSendBtn = cartModal.querySelector('.cart-confirm');\n    const goodsWrapper = document.querySelector('.goods');\n    const cartWrapper = document.querySelector('.cart-wrapper');\n    const counter = document.querySelector('.counter');\n    \n    const openCart = () =>{\n        const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\n        cartModal.style.display = 'flex';\n        renderCart(cart);\n        cartTotal.textContent = cart.reduce((sum, goodItem) => {\n            return sum += goodItem.price;\n        }, 0);\n    }\n    const closeCart = () =>{\n        cartModal.style.display = '';\n    }\n\n    const cartCount = () =>{\n        const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\n        if(cart.length > 0){\n            localStorage.setItem('cartCount', cart.length);\n        }else{\n            localStorage.setItem('cartCount', 0);\n        }\n        counter.textContent = localStorage.getItem('cartCount');\n    }\n\n    cartCount();\n\n    cart.addEventListener('click', openCart);\n    cartClose.addEventListener('click', closeCart);\n\n    goodsWrapper.addEventListener('click', (event) =>{\n        let target = event.target;\n\n        if(target.classList.contains('btn-primary')){\n            const card = target.closest('.card');\n            const key = card.dataset.key;\n            const goods =JSON.parse(localStorage.getItem('goods'));\n            const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\n            const goodItem = goods.find(item => item.id === +key);\n\n            cart.push(goodItem);\n            \n            localStorage.setItem('cart', JSON.stringify(cart));\n            cartCount();\n        }\n    })\n\n    cartWrapper.addEventListener('click', event =>{\n        let target = event.target;\n        let btn = target.classList.contains('btn-danger');\n        if(btn){\n            const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\n            const card = target.closest('.card');\n            const key = card.dataset.key;\n            const index = cart.findIndex((item) => {\n              return item.id === +key;\n            });\n\n            cart.splice(index, 1);\n\n            localStorage.setItem('cart', JSON.stringify(cart));\n            cartCount();\n            renderCart(cart);\n            cartTotal.textContent = cart.reduce((sum, goodItem) => {\n                return sum += goodItem.price;\n            }, 0);\n            \n        }\n    })\n\n    cartSendBtn.addEventListener('click', () =>{\n        const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\n\n        postData(cart).then(() =>{\n            localStorage.removeItem('cart');\n            renderCart([]);\n            cartCount();\n            cartTotal.textContent = 0;\n        });\n    })\n}\n\nexport default cart;"],"file":"cart.dev.js"}