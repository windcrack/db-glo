"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _renderCart=_interopRequireDefault(require("./renderCart")),_postData=_interopRequireDefault(require("./postData"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var cart=function(){function n(){var t=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];0<t.length?localStorage.setItem("cartCount",t.length):localStorage.setItem("cartCount",0),u.textContent=localStorage.getItem("cartCount")}var t=document.querySelector("#cart"),e=document.querySelector(".cart"),r=e.querySelector(".cart-close"),o=e.querySelector(".cart-total > span"),a=e.querySelector(".cart-confirm"),c=document.querySelector(".goods"),l=document.querySelector(".cart-wrapper"),u=document.querySelector(".counter");n(),t.addEventListener("click",function(){var t=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];e.style.display="flex",(0,_renderCart.default)(t),o.textContent=t.reduce(function(t,e){return t+e.price},0)}),r.addEventListener("click",function(){e.style.display=""}),c.addEventListener("click",function(t){var e=t.target;if(e.classList.contains("btn-primary")){var r=e.closest(".card").dataset.key,a=JSON.parse(localStorage.getItem("goods")),c=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],o=a.find(function(t){return t.id===+r});c.push(o),localStorage.setItem("cart",JSON.stringify(c)),n()}}),l.addEventListener("click",function(t){var e=t.target;if(e.classList.contains("btn-danger")){var r=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],a=e.closest(".card").dataset.key,c=r.findIndex(function(t){return t.id===+a});r.splice(c,1),localStorage.setItem("cart",JSON.stringify(r)),n(),(0,_renderCart.default)(r),o.textContent=r.reduce(function(t,e){return t+e.price},0)}}),a.addEventListener("click",function(){var t=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];(0,_postData.default)(t).then(function(){localStorage.removeItem("cart"),(0,_renderCart.default)([]),n(),o.textContent=0})})},_default=cart;exports.default=_default;
//# sourceMappingURL=cart.min.js.map
